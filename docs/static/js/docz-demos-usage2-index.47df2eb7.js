(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"./docz/demos/usage2/index.mdx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),o=n("./node_modules/react/index.js"),a=n("./node_modules/@mdx-js/react/dist/index.es.js"),i=n("./node_modules/docz/dist/index.esm.js"),l=n("./src/index.tsx"),c=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(l){o={error:l}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},s=[{type:"variable",matchRegexp:/^\{\{(123)\}\}/,className:"cm-keyword",text:"nickname"}];function u(){var e=o.useRef(null),t=c(o.useState("{{123}} {{124}}"),1)[0],n=c(o.useState(s),1)[0];return o.useEffect(function(){setTimeout(function(){s.push({type:"variable",matchRegexp:/^\{\{(124)\}\}/,className:"cm-keyword",text:"age"}),e.current.forceUpdateEditor()},2e3)},[]),o.createElement(l.a,{ref:e,value:t,placeholders:n,className:"editor-instance"})}u&&u===Object(u)&&Object.isExtensible(u)&&Object.defineProperty(u,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"ReactTemplateEditorWrapper",filename:"docz\\demos\\usage2\\index.tsx"}}),n.d(t,"default",function(){return f});var d={},p="wrapper";function f(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(a.b)(p,Object.assign({},d,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("h1",{id:"usage"},"Usage"),Object(a.b)(i.c,{__position:0,__code:"<ReactTemplateEditorWrapper />",__scope:{props:this?this.props:n,Playground:i.c,ReactTemplateEditorWrapper:u},__codesandbox:"undefined",mdxType:"Playground"},Object(a.b)(u,{mdxType:"ReactTemplateEditorWrapper"})))}f&&f===Object(f)&&Object.isExtensible(f)&&Object.defineProperty(f,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"MDXContent",filename:"docz\\demos\\usage2\\index.mdx"}}),f.isMDXComponent=!0},"./src/index.tsx":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n("../editor/node_modules/codemirror/lib/codemirror.js"),a=n.n(o),i=(n("../editor/node_modules/codemirror/lib/codemirror.css"),n("../editor/node_modules/codemirror/addon/scroll/simplescrollbars.css"),function(e){var t="function"===typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}),l=0;function c(e,t){var n=document.createElement("span");return n.innerHTML=e,t&&t.split(" ").forEach(function(e){e&&n.classList.add(e)}),n}n("../editor/node_modules/codemirror/addon/scroll/simplescrollbars.js"),n("../editor/node_modules/codemirror/addon/display/placeholder.js");var s=function(){function e(e,t){this.options=t;var n,r,o=(n={placeholders:t.placeholders},r="Template-Editor-"+ ++l+"-"+Date.now(),a.a.defineMode(r,function(){function e(e,t){var r,o;t.line=e.lineOracle.line;try{for(var a=i(n.placeholders),l=a.next();!l.done;l=a.next()){var c=l.value;if(e.match(c.matchRegexp,!1)){var s=c.consumeRegexp||c.matchRegexp,u=e.match(s);return t.placeholder=c,t.matchedValue=u[1],c.type}}}catch(d){r={error:d}}finally{try{l&&!l.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}return e.next(),null}return{startState:function(){return{tokenize:e,context:null}},token:function(t,n){return n.tokenize===e&&t.eatSpace()?(n.placeholder=void 0,n.matchedValue=void 0,null):n.tokenize(t,n)}}}),r),c=!("lineWrapping"in t)||!!t.lineWrapping;this.instance=a()(e,{mode:o,lineWrapping:c,scrollbarStyle:"simple",readOnly:t.disabled,value:t.initialValue||"",placeholder:t.placeholder}),this.replaceVariables(),this.listenContentChange()}return e.prototype.listenContentChange=function(){var e=this;this.instance.on("change",function(){e.replaceVariables()})},e.prototype.replaceVariables=function(){var e=this.options.createReplacementNode,t=this.instance.getDoc();t.getAllMarks().forEach(function(e){e.clear()}),this.getTokens().forEach(function(n){if(n&&n.type&&n.state&&n.state.placeholder){var r=n.state.line,o={line:r,ch:n.start},a={line:r,ch:n.end},i=n.state.placeholder,l=n.state.matchedValue,s=e?e(i,l,n.string):c(i&&i.hasOwnProperty("text")?"string"===typeof i.text?i.text:i.text(l):l,i&&i.hasOwnProperty("className")?i.className:"cm-variable");t.markText(o,a,{replacedWith:s})}})},e.prototype.getTokens=function(){var e=this,t=[];return this.instance.getDoc().eachLine(function(n){e.instance.getLineTokens(n.lineNo()).forEach(function(e){return t.push(e)})}),t},e.prototype.getValue=function(){return this.instance.getDoc().getValue()},e.prototype.setValue=function(e){this.instance.getDoc().setValue(e)},e.prototype.onChange=function(e){var t=this;this.instance.on("change",function(){e(t.getValue())})},e}();n.d(t,"a",function(){return f});var u=function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},d=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]])}return n},p=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(l){o={error:l}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},f=r.forwardRef(function(e,t){var n=e.value,o=void 0===n?"":n,a=e.disabled,i=e.placeholder,l=e.placeholders,c=e.createReplacementNode,f=e.onChange,m=d(e,["value","disabled","placeholder","placeholders","createReplacementNode","onChange"]),h=r.useRef(null),b=p(r.useState(),2),y=b[0],v=b[1];return r.useEffect(function(){v(new s(h.current,{initialValue:o,disabled:a,placeholder:i,placeholders:l,createReplacementNode:c}))},[]),r.useEffect(function(){f&&y.onChange(function(e){var t=y.getTokens();f(e,t)})},[]),r.useEffect(function(){y&&y.setValue(e.value)},[e.value]),r.useEffect(function(){y&&y.instance.setOption("placeholder",i)},[e.placeholder]),r.useEffect(function(){y&&y.instance.setOption("readOnly",a)},[e.disabled]),r.useImperativeHandle(t,function(){return{forceUpdateEditor:function(){y.setValue(e.value+" "),setTimeout(function(){y.setValue(e.value)},0)}}}),r.createElement("div",u({ref:h},m))});"undefined"!==typeof f&&f&&f===Object(f)&&Object.isExtensible(f)&&Object.defineProperty(f,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"ReactTemplateEditor",filename:"src\\index.tsx"}})}}]);
//# sourceMappingURL=docz-demos-usage2-index.8f86d8904df674b5e217.js.map