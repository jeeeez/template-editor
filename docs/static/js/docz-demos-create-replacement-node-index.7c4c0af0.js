(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"./docz/demos/createReplacementNode/index.mdx":function(e,n,t){"use strict";t.r(n),t.d(n,"default",function(){return s});var a=t("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),r=(t("./node_modules/react/index.js"),t("./node_modules/@mdx-js/react/dist/index.es.js")),o=t("./node_modules/docz/dist/index.esm.js"),c=t("./src/index.tsx"),l={},i="wrapper";function s(e){var n=e.components,t=Object(a.a)(e,["components"]);return Object(r.b)(i,Object.assign({},l,t,{components:n,mdxType:"MDXLayout"}),Object(r.b)("h1",{id:"custom-createreplacementnode"},"Custom createReplacementNode"),Object(r.b)("p",null,"Click the variables below, you can addEventListener on the ",Object(r.b)("inlineCode",{parentName:"p"},"span")," which create by the custom ",Object(r.b)("inlineCode",{parentName:"p"},"createReplacementNode")," function"),Object(r.b)(o.c,{__position:0,__code:"<ReactTemplateEditor\n  value=\"Hello {{nickname}}\\nToday is {{datetime}}\\nThis is an {{unknown variable}}\\n\"\n  placeholder=\"Please input your message\"\n  placeholders={[\n    {\n      type: 'variable',\n      matchRegexp: /^\\{\\{(nickname)\\}\\}/,\n      className: 'cm-keyword',\n      text: 'Peter',\n    },\n    {\n      type: 'variable',\n      matchRegexp: /^\\{\\{(datetime)\\}\\}/,\n      className: 'cm-keyword',\n      text: new Date().toString(),\n    },\n    {\n      type: 'unknown-variable',\n      matchRegexp: /^\\{\\{(.*)\\}\\}/,\n      className: 'cm-error',\n      text: 'Unknown Variable',\n    },\n  ]}\n  createReplacementNode={placeholder => {\n    const span = document.createElement('span')\n    span.innerText = placeholder.text\n    span.classList.add(placeholder.className)\n    span.addEventListener('click', () => {\n      window.alert(placeholder.text)\n    })\n    return span\n  }}\n/>",__scope:{props:this?this.props:t,Playground:o.c,ReactTemplateEditor:c.a},__codesandbox:"N4IgZglgNgpgziAXKCA7AJjAHgOgBYAuAtlEqAMYD2qBMNSIAPOhAG4AEE6AvADogAnSpQL8AfIwD0LVmJABfADQg0mXACsEyEFRp0CDSQCojvVO3YAVPBDjsAwpUwBlAIYYARpSzs8rux4wdOyuAK4ElESuBBDkrlBQAJ7sAOZ0MALRMOjsoXBoKWYWAAZUmHDu6F5YGcU47ACSYOyJlKEA5AIw7OShAhBtdniUAO7sBH4Evq4ADjPp6IotbT3uRT14MOQA1uxtU20C7OiU5EMZMIi-BAQzcIiSkikQE6EeOFREkmXwldXfTl-nm8GTM6yay1C7Gw836dHI3XcyTgBAEoRSKVgdhGLzw4xsdgqwKwSxmsH83UytkR5lscFCMHW1FSuLe9UQAEozEZJGYIEQZpQBFMAEowVzkKZgIREdidcWS9oAbj5AqFooVBAAIgB5ACy7GlkTlXQlBAAtCciMrVYLhQ5IoLUPpDTK5ThJNhXALYDbUGYxWbdXqcF0MBkABTrZhsMTrCyMPAAZjEjjVzponDVwuy7BxEx6gKJVRBAkQUmTcfMFnYjBmYgjDSmUWSztzrnQLBi1Hi7BmQju40oqRgUxe7DDmH6qBSeZgCQ5Unr8draadLskVYT0ljijMJ16RH0ODSBAAorAjzQAEKJBroCOdYQEdpc1AcpUKZRen0wHCaMgdGoWh6EQFRsymYB2AABSgVxEhSIRQgwdh5FdY12gPAAvP1-TtSD2EDSVLBgH0sjPLshVQ9DZXaAABWgyNoc1sheIVJFNRUVVQPD1UIzUaJNTV2jBVBdBRY5Tiw5wCESLF2G4dhgHWKIBGeVArnaAAGdgkxmLB2j3asZg7FgZ00gAWfT2AANn0wz1jAYCADFvWgRJNP4ZxDgRB1MBgoR-CWIhqEoOATIRBzqycmhnAgLDLnYABGCyjPkUTxKmABBOYFPYCMoPIGwoHQMNUI5BSxHy6MZHYFE5JgbhgGwmSGrgeQtxrYAiugUrggAMn68ZEnmShmh6kqyu4aa5TAZDJQGVB2nYAB-DZerDCMKquCa-tQdLqykGQqzfMwYT4zAwDCKApi2yrqsOnLl2rBMiIIHBnMyFIrwITqa1rN6SKYmAKLYgQV3-1h4gZPgQAACXnKBh2AYAeJ2VBvRgeR0rMSwnHgzg7BR9AshiI9sd4XGCUJkJzBR5DtlQUZzCh_pXA8WAKbBEAIZrMkJRgYYSoyWHYPFOBujQGZwkhI4jzgCo0n4XmLH5hEhanOAmoAbRVrq9f-2T5k01mIHZ30jP-q2ayiAgirFNIsBmK5JAAPUp5TeGACM0cZzGuV4HH5EkS3rat8g4IVgA5THNPIIhzW2GBEhGIV0CisOrdoLACE06DRwyDPM9Q0PM-Ul7i6NxL2lN82YCL4v2Ft-2YEd532Ddj2PYjEnaDJmAA6DkODZrCP_DgGOjzjhOk5TtOG8r7Bc_YZ0xi1LItpwCIZOnFIttLsOlBH8vG4sKvNIZpmRlQc1a45-uD8z5u8AdmEXfdr3u5wIxB8p4PH7DmPaOsc5TxxYgIIQAgF6Z2zsvdoABVVAjNmbsAAGquDZvfaBVsj4V3-gAXQOpncgppaBijVqRfQUdARNQoRrDI90T7F0ynVEy5hFIHlCD9D4pCQaXn0I-cK7hXwjyEagHAaBnQCBIjnPKdDKDCwEFvJeoi2EfEjnAAAMrYd6pkIzyMUeo8ek8B6qPcDgUyZ5WD6G0SidIAhHwR1iNsQy-UKrcCqkwxuOIMCjAsbAYU-i4LqwUVOZROc3yN3kJE4uXQCB9HMGIvWFM8Edz-rWSQb0PpfR-p1KQT0TpmC_CACK2xXBpH_HAaggFdAgQMGBJh_AMZHn4FcfgPxizVAyCxLA3oySMhAKHfg1iBD5GoK09g_AtI4GmVpIK6x-DlBIRAGY3Z_RIEmSALKdU8KwGhL038xwYBkkoIkXMeQCgTk1OaDpfxSzzOrPwKIaAJn8FUNgSpDyLCLOOXQTAYkIDwAmV4zZ2FXkgFdklHAAAmGZXyaz8E4qIDZ_BIU2RwAADhwDZeF3zBDXKtOCtFmLsXK2rAdeQxTOneA-NQSAKRKnVO0LU_QDBlIgEYvzWgrT2m8PNEi80swZj8EpdjeQQA",mdxType:"Playground"},Object(r.b)(c.a,{value:"Hello {{nickname}}\\nToday is {{datetime}}\\nThis is an {{unknown variable}}\\n",placeholder:"Please input your message",placeholders:[{type:"variable",matchRegexp:/^\{\{(nickname)\}\}/,className:"cm-keyword",text:"Peter"},{type:"variable",matchRegexp:/^\{\{(datetime)\}\}/,className:"cm-keyword",text:(new Date).toString()},{type:"unknown-variable",matchRegexp:/^\{\{(.*)\}\}/,className:"cm-error",text:"Unknown Variable"}],createReplacementNode:function(e){var n=document.createElement("span");return n.innerText=e.text,n.classList.add(e.className),n.addEventListener("click",function(){window.alert(e.text)}),n},mdxType:"ReactTemplateEditor"})))}s&&s===Object(s)&&Object.isExtensible(s)&&Object.defineProperty(s,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"MDXContent",filename:"docz\\demos\\createReplacementNode\\index.mdx"}}),s.isMDXComponent=!0},"./src/index.tsx":function(e,n,t){"use strict";var a=t("./node_modules/react/index.js"),r=t("../editor/node_modules/codemirror/lib/codemirror.js"),o=t.n(r),c=(t("../editor/node_modules/codemirror/lib/codemirror.css"),t("../editor/node_modules/codemirror/addon/scroll/simplescrollbars.css"),function(e){var n="function"===typeof Symbol&&e[Symbol.iterator],t=0;return n?n.call(e):{next:function(){return e&&t>=e.length&&(e=void 0),{value:e&&e[t++],done:!e}}}}),l=0;function i(e,n){var t=document.createElement("span");return t.innerHTML=e,n&&n.split(" ").forEach(function(e){e&&t.classList.add(e)}),t}t("../editor/node_modules/codemirror/addon/scroll/simplescrollbars.js"),t("../editor/node_modules/codemirror/addon/display/placeholder.js");var s=function(){function e(e,n){this.options=n;var t,a,r=(t={placeholders:n.placeholders},a="Template-Editor-"+ ++l+"-"+Date.now(),o.a.defineMode(a,function(){function e(e,n){var a,r;n.line=e.lineOracle.line;try{for(var o=c(t.placeholders),l=o.next();!l.done;l=o.next()){var i=l.value;if(e.match(i.matchRegexp,!1)){var s=i.consumeRegexp||i.matchRegexp,d=e.match(s);return n.placeholder=i,n.matchedValue=d[1],i.type}}}catch(p){a={error:p}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(a)throw a.error}}return e.next(),null}return{startState:function(){return{tokenize:e,context:null}},token:function(n,t){return t.tokenize===e&&n.eatSpace()?(t.placeholder=void 0,t.matchedValue=void 0,null):t.tokenize(n,t)}}}),a),i=!("lineWrapping"in n)||!!n.lineWrapping;this.instance=o()(e,{mode:r,lineWrapping:i,scrollbarStyle:"simple",readOnly:!!n.disabled&&"nocursor",value:n.initialValue||"",placeholder:n.placeholder}),this.replaceVariables(),this.listenContentChange()}return e.prototype.listenContentChange=function(){var e=this;this.instance.on("change",function(){e.replaceVariables()})},e.prototype.replaceVariables=function(){var e=this.options.createReplacementNode,n=this.instance.getDoc();n.getAllMarks().forEach(function(e){e.clear()}),this.getTokens().forEach(function(t){if(t&&t.type&&t.state&&t.state.placeholder){var a=t.state.line,r={line:a,ch:t.start},o={line:a,ch:t.end},c=t.state.placeholder,l=t.state.matchedValue,s=e?e(c,l,t.string):i(c&&c.hasOwnProperty("text")?"string"===typeof c.text?c.text:c.text(l):l,c&&c.hasOwnProperty("className")?c.className:"cm-variable");n.markText(r,o,{replacedWith:s})}})},e.prototype.getTokens=function(){var e=this,n=[];return this.instance.getDoc().eachLine(function(t){e.instance.getLineTokens(t.lineNo()).forEach(function(e){return n.push(e)})}),n},e.prototype.getValue=function(){return this.instance.getDoc().getValue()},e.prototype.setValue=function(e){this.instance.getDoc().setValue(e)},e.prototype.onChange=function(e){var n=this;this.instance.on("change",function(){e(n.getValue())})},e}();t.d(n,"a",function(){return m});var d=function(){return(d=Object.assign||function(e){for(var n,t=1,a=arguments.length;t<a;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e}).apply(this,arguments)},p=function(e,n){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(t[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)n.indexOf(a[r])<0&&(t[a[r]]=e[a[r]])}return t},u=function(e,n){var t="function"===typeof Symbol&&e[Symbol.iterator];if(!t)return e;var a,r,o=t.call(e),c=[];try{for(;(void 0===n||n-- >0)&&!(a=o.next()).done;)c.push(a.value)}catch(l){r={error:l}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(r)throw r.error}}return c},m=a.forwardRef(function(e,n){var t=e.value,r=void 0===t?"":t,o=e.style,c=e.disabled,l=e.placeholder,i=e.placeholders,m=e.createReplacementNode,A=e.onChange,h=p(e,["value","style","disabled","placeholder","placeholders","createReplacementNode","onChange"]),g=a.useRef(null),f=u(a.useState(),2),y=f[0],b=f[1];return a.useEffect(function(){b(new s(g.current,{initialValue:r,disabled:c,placeholder:l,placeholders:i,createReplacementNode:m}))},[]),a.useEffect(function(){A&&y.onChange(function(e){var n=y.getTokens();A(e,n)})},[]),a.useEffect(function(){y&&y.setValue(e.value)},[e.value]),a.useEffect(function(){y&&y.instance.setOption("placeholder",l)},[e.placeholder]),a.useEffect(function(){y&&y.instance.setOption("readOnly",!!c&&"nocursor")},[e.disabled]),a.useImperativeHandle(n,function(){return{forceUpdateEditor:function(){y.setValue(e.value+" "),setTimeout(function(){y.setValue(e.value)},0)}}}),a.createElement("div",d({ref:g,style:d({border:"1px solid #d9d9d9",borderRadius:2},o)},h))});"undefined"!==typeof m&&m&&m===Object(m)&&Object.isExtensible(m)&&Object.defineProperty(m,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"ReactTemplateEditor",filename:"src\\index.tsx"}})}}]);
//# sourceMappingURL=docz-demos-create-replacement-node-index.55569ec89d5e06d1640d.js.map